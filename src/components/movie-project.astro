---
import { Image } from "astro:assets";
import { Icon } from "astro-icon";
import findImageDimensionsParams from "@utils/findImageDimensions";

const icons = {
  Photogrammétrie: "stereo-glasses",
  "Modélisation 3D": "frustum",
  Interactions: "hand-finger",
  Accessibilité: "accessible",
  "Réalité augmentée": "augmented-reality",
  "Réalité virtuelle": "badge-vr",
  Collaboration: "users-group",
  Programmation: "code",
  Innovation: "bulb",
};

type Props = {
  title: string;
  author: string;
  description: string;
  image: ImageMetadata;
  url: string;
  tags: string | string[];
};
const {
  title,
  author,
  description,
  image,
  url,
  tags: tagListOrString,
} = Astro.props;

const tagList = Array.isArray(tagListOrString)
  ? tagListOrString
  : tagListOrString.split(",");
const tags = tagList.map((tag) => tag.trim());
---

<div
  class="flex overflow-hidden mb-[32px] rounded-md border-r-[#D8DEE9] border-opacity-50 border-2 md:h-[196px]">
  <Image
    src={image}
    class="hidden md:inline-block rounded-l-md m-0"
    alt="Crossing the Landscape"
    width={196}
    height={196}
    loading="eager"
    format="avif"
  />
  <div class="md:h-[196px] grow px-6 py-4">
    <div class="flex gap-4">
      <span class="font-semibold leading-6 text-md">{title}</span>
      <span class="h-0 text-gray-600 leading-6">
        {
          tags.map((tag) => (
            <span
              class="transititext-primary text-primary transition duration-50 ease-in-out hover:text-primary-600 focus:text-primary-600 active:text-primary-700 dark:text-primary-400 dark:hover:text-primary-500 dark:focus:text-primary-500 dark:active:text-primary-600"
              data-te-toggle="tooltip"
              title={tag}>
              <Icon
                class="hover:text-gray-900 inline-block w-4 h-4"
                name={icons[tag]}
              />
            </span>
          ))
        }
      </span>
    </div>
    <span class="text-slate-400 leading-4 mt-0 text-sm">{author}</span>

    <p class="text-sm mt-[10px] mb-[10px]">
      {description}
    </p>

    {
      url ? (
        <p class="mt-[10px] mb-0">
          <a
            href={url}
            target="_blank"
            class="font-normal no-underline text-sm bg-white">
            En apprendre plus{" "}
            <Icon class="inline-block w-4 h-4" name="arrow-right" />
          </a>
        </p>
      ) : null
    }
  </div>
</div>
